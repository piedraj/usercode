################################################################################
#
#  0. Get ROOT ready
#
################################################################################
source /opt/root/bin/thisroot.sh  # fanae

ssh -Y piedra@lorienmaster.irb.hr
export SCRAM_ARCH=slc5_amd64_gcc481
source /cvmfs/cms.cern.ch/cmsset_default.sh
scram project CMSSW_7_0_0
cd CMSSW_7_0_0/src
cmsenv


################################################################################
#
#  1. Get the code and auxiliary files
#
################################################################################
git clone git://github.com/piedraj/usercode.git    # read only

# or

git clone https://github.com/piedraj/usercode.git  # read and write


################################################################################
#
#  2. Produce histograms
#
################################################################################
cd usercode/WZ


# Test the code
root -l -b -q runAnalysisWZ.C


# Produce all the output histograms, including systematics
./submitEverythingForMe.sh


# Check the status of the jobs
qstat


# Merge the output histograms
./merge.sh results-2014
#./merge.sh results-2014/0jet
#./merge.sh results-2014/1jet
#./merge.sh results-2014/2jet


################################################################################
#
#  3. Extract the WZ cross section
#
################################################################################
cd usercode/WZ


# Test the code
root -l -b -q runXS.C


# Produce all the output plots and tables
./runXS.sh


################################################################################
#
#  4. GitHub (if you want to commit)
#
################################################################################
mkdir GitHub
git clone https://github.com/piedraj/usercode.git  # read and write
cd usercode/WZ
git add *
git commit -m 'My changes'
git push origin master

